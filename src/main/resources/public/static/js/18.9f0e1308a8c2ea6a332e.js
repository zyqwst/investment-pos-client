webpackJsonp([18],{XOKD:function(t,e){},cvI8:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r("Xxa5"),a=r.n(i),s=r("exGp"),n=r.n(s),o=r("Dd8w"),l=r.n(o),c=r("NYxO"),d=r("9HqN"),u=r("yKLP"),m={computed:l()({},Object(c.b)(["distribution"])),activated:function(){this.fetch()},deactivated:function(){this.$destroy()},data:function(){return{loading:!1,addressList:[],curDistribution:{},form:{id:null,qty:1,addressId:null,remark:"",distributionStatus:0,distributionDate:""},pickerOptions1:{disabledDate:function(t){return t<new Date((new Date).getTime()-864e5)},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"明天",onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}}]}}},methods:{back:function(){this.$router.back()},fetch:function(){var t=this;return n()(a.a.mark(function e(){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Object(u.a)(t.distribution.memberId);case 4:return r=e.sent,t.addressList=r.object,e.next=8,Object(d.e)(t.distribution.id);case 8:i=e.sent,t.curDistribution=i.object;case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,t,[[0,,10,13]])}))()},send:function(){var t=this;return n()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.form.id=t.distribution.id,t.form.qty&&!(t.form.qty<=0)){e.next=5;break}return t.$message({type:"error",message:"数量不可为空且不可小于0"}),e.abrupt("return");case 5:if(t.form.addressId){e.next=8;break}return t.$message({type:"error",message:"请选择送货地址"}),e.abrupt("return");case 8:return t.loading=!0,console.info(t.form),e.next=12,Object(d.g)(t.form);case 12:e.sent,t.$message("提交成功"),t.$router.back();case 15:return e.prev=15,t.loading=!1,e.finish(15);case 18:case"end":return e.stop()}},e,t,[[0,,15,18]])}))()}}},f={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"notapply-send"},[r("navbar",{on:{back:t.back}},[r("div",{staticClass:"title"},[t._v("配送")])]),t._v(" "),r("div",[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-col",{attrs:{span:14}},[r("el-card",[r("el-form",{ref:"form",staticClass:"form",attrs:{model:t.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"立即配送:"}},[r("el-switch",{attrs:{"active-value":"1","inactive-value":"0",width:80},model:{value:t.form.distributionStatus,callback:function(e){t.$set(t.form,"distributionStatus",e)},expression:"form.distributionStatus"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"客户:"}},[r("div",[t._v(t._s(t.curDistribution.name))])]),t._v(" "),r("el-form-item",{attrs:{label:"电话:"}},[t._v("\n                            "+t._s(t.curDistribution.phone)+"\n                        ")]),t._v(" "),0==t.form.distributionStatus?r("el-form-item",{attrs:{label:"预约日期:"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{editable:!1,align:"right",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions1},model:{value:t.form.distributionDate,callback:function(e){t.$set(t.form,"distributionDate",e)},expression:"form.distributionDate"}})],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"商品名称:"}},[t._v("\n                            "+t._s(t.curDistribution.goodsName)+"\n                        ")]),t._v(" "),r("el-form-item",{attrs:{label:"可配送数量:"}},[t._v("\n                            "+t._s(t.curDistribution.balance-t.distribution.controlQty)+"\n                        ")]),t._v(" "),r("el-form-item",{attrs:{label:"配送数量:"}},[r("sy-input",{model:{value:t.form.qty,callback:function(e){t.$set(t.form,"qty",e)},expression:"form.qty"}})],1),t._v(" "),r("el-form-item",{staticClass:"my-3",attrs:{label:"送货地址:"}},[r("el-radio-group",{model:{value:t.form.addressId,callback:function(e){t.$set(t.form,"addressId",e)},expression:"form.addressId"}},t._l(t.addressList,function(e){return r("el-radio",{key:e.id,staticClass:"mb-2",staticStyle:{display:"block"},attrs:{label:e.id,name:"type",border:""}},[r("div",{staticClass:"contact"},[r("div",{staticClass:"linkMan"},[r("i",{staticClass:"el-icon-service"}),r("span",[t._v("联系人")]),t._v(t._s(e.linkMan))]),t._v(" "),r("div",{staticClass:"tel"},[r("i",{staticClass:"el-icon-phone"}),r("span",[t._v("电话")]),t._v(t._s(e.tel))]),t._v(" "),r("div",{staticClass:"address"},[r("i",{staticClass:"el-icon-location"}),r("span",[t._v("地址")]),t._v(" "+t._s(e.address))])])])}))],1),t._v(" "),r("el-form-item",{attrs:{label:"备注:"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),r("el-form-item",{staticClass:"pt-3"},[r("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.send(e)}}},[t._v("提 交")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var v=r("VU/8")(m,f,!1,function(t){r("XOKD")},null,null);e.default=v.exports}});