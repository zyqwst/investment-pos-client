webpackJsonp([11],{"5jTV":function(t,e){},BSmo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),l=a("exGp"),o=a.n(l),s=a("9HqN"),c={data:function(){return{keyword:"",applyData:{},currentPage:1,loading:!1}},watch:{currentPage:function(){this.fetchApply()},keyword:_.debounce(function(){this.fetchApply()},300)},deactivated:function(){this.$destroy()},computed:{tableHeight:function(){return window.innerHeight-160}},methods:{change:function(){this.$router.replace({path:"/notapply"})},init:function(){applyData={},currentPage=1},toPage:function(t){this.currentPage=t},fetchApply:function(){var t=this;return o()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loading=!0,e.next=4,Object(s.c)(t.keyword,t.currentPage-1);case 4:a=e.sent,t.applyData=a.object;case 6:return e.prev=6,t.loading=!1,e.finish(6);case 9:case"end":return e.stop()}},e,t,[[0,,6,9]])}))()},confirm:function(t){var e=this;return o()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,Object(s.b)(t);case 4:e.fetchApply(),e.$message("确认成功");case 6:return a.prev=6,e.loading=!1,a.finish(6);case 9:case"end":return a.stop()}},a,e,[[0,,6,9]])}))()},cancel:function(t){var e=this;this.$confirm("此操作将取消用户配送申请, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.loading=!0,Object(s.a)(t).then(function(t){e.$message("取消成功"),e.loading=!1}).catch(function(t){e.loading=!1}),e.fetchApply()}).catch(function(){})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"distribution"},[a("el-row",{staticClass:"pt-3",attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:16}},[a("sy-input",{attrs:{placeholder:"销售单号/会员卡号/会员手机号",prefix:"",clearable:"",placement:"bottom-start"},on:{prefix:t.fetchApply},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),t._v(" "),a("el-col",{attrs:{offset:1,span:2}},[a("el-button",{attrs:{icon:"el-icon-sort",type:"success"},nativeOn:{click:function(e){return e.preventDefault(),t.change(e)}}},[t._v("未申请配送")])],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{ref:"applyTable",staticStyle:{width:"100%"},attrs:{data:t.applyData.content,stripe:"","highlight-current-row":"",height:t.tableHeight}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"联系人:"}},[a("span",[t._v(t._s(e.row.linkMan))])]),t._v(" "),a("el-form-item",{attrs:{label:"联系电话:"}},[a("span",[t._v(t._s(e.row.tel))])]),t._v(" "),a("el-form-item",{attrs:{label:"地址:"}},[a("span",[t._v(t._s(e.row.address))])]),t._v(" "),a("el-form-item",{attrs:{label:"销售单号:"}},[a("span",[t._v(t._s(e.row.outTradeNo))])]),t._v(" "),a("el-form-item",{attrs:{label:"销售日期:"}},[a("span",[t._v(t._s(e.row.saleDate))])]),t._v(" "),a("el-form-item",{attrs:{label:"收银员:"}},[a("span",[t._v(t._s(e.row.saleManName))])]),t._v(" "),a("el-form-item",{attrs:{label:"备注:"}},[a("span",[t._v(t._s(e.row.remark))])])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"distributeDate",label:"预约日期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"商品代码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qty",label:"申请数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:150},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.confirm(e.row.id)}}},[t._v("\n                        确认\n                        ")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.cancel(e.row.id)}}},[t._v("\n                        取消\n                        ")])]}}])})],1)],1)],1),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-pagination",{staticClass:"mt-2",attrs:{background:"",layout:"total, prev, pager, next",pageCount:t.applyData.totalPages,total:t.applyData.totalElements,pageSize:t.applyData.size,currentPage:t.currentPage},on:{currentChange:t.toPage,"update:currentPage":function(e){t.currentPage=e}}})],1)],1)},staticRenderFns:[]};var p=a("VU/8")(c,i,!1,function(t){a("5jTV"),a("g72R")},"data-v-7875fc08",null);e.default=p.exports},g72R:function(t,e){}});