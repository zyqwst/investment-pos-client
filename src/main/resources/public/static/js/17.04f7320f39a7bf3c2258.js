webpackJsonp([17],{Y4aQ:function(t,a){},ltlo:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("Xxa5"),n=e.n(s),i=e("exGp"),r=e.n(i),c=e("Dd8w"),v=e.n(c),l=e("NYxO"),u=e("VvTn"),o=e("7L0k"),d={name:"storeSettle",data:function(){return{loading:!1,list:[],exchangeKey:null,beginDate:null,endDate:null}},activated:function(){this.init()},computed:v()({},Object(l.b)(["curSaleMan"]),{retailCash:function(){var t=0;return this.list.forEach(function(a){3==a.channel&&1==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},retailPos:function(){var t=0;return this.list.forEach(function(a){3==a.channel&&7==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},retailCard:function(){var t=0;return this.list.forEach(function(a){3==a.channel&&5==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},retailSum:function(){var t=Object(u.a)(this.retailPos,this.retailCash);return t=Object(u.a)(t,this.retailCard)},rechargeCash:function(){var t=0;return this.list.forEach(function(a){1==a.channel&&1==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},rechargePos:function(){var t=0;return this.list.forEach(function(a){1==a.channel&&7==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},rechargeSum:function(){return Object(u.a)(this.rechargeCash,this.rechargePos)},tequanCash:function(){var t=0;return this.list.forEach(function(a){2==a.channel&&1==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},tequanPos:function(){var t=0;return this.list.forEach(function(a){2==a.channel&&7==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},tequanCard:function(){var t=0;return this.list.forEach(function(a){2==a.channel&&5==a.settleTypeId&&1==a.type&&(t=Object(u.a)(t,a.amount))}),t},tequanSum:function(){var t=Object(u.a)(this.tequanPos,this.tequanCash);return t=Object(u.a)(t,this.tequanCard)},refundCash:function(){var t=0;return this.list.forEach(function(a){3==a.channel&&1==a.settleTypeId&&-1==a.type&&(t=Object(u.a)(t,a.amount))}),t},refundPos:function(){var t=0;return this.list.forEach(function(a){3==a.channel&&7==a.settleTypeId&&-1==a.type&&(t=Object(u.a)(t,a.amount))}),t},refundCard:function(){var t=0;return this.list.forEach(function(a){3==a.channel&&5==a.settleTypeId&&-1==a.type&&(t=Object(u.a)(t,a.amount))}),t},refundSum:function(){var t=Object(u.a)(this.refundPos,this.refundCash);return t=Object(u.a)(t,this.refundCard)},cashAmount:function(){var t=Object(u.a)(this.retailCash,this.rechargeCash);return t=Object(u.a)(t,this.tequanCash),t=Object(u.a)(t,this.refundCash)},posAmount:function(){var t=Object(u.a)(this.retailPos,this.rechargePos);return t=Object(u.a)(t,this.tequanPos),t=Object(u.a)(t,this.refundPos)},cardAmount:function(){var t=Object(u.a)(this.retailCard,0);return t=Object(u.a)(t,this.tequanCard),t=Object(u.a)(t,this.refundCard)},receivableAmount:function(){var t=0;return this.list.forEach(function(a){6==a.settleTypeId&&(t=Object(u.a)(t,a.amount))}),t}}),methods:{init:function(){var t=this;return r()(n.a.mark(function a(){var e,s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,t.exchangeKey=null,t.list=[],a.prev=3,a.next=6,Object(o.a)(t.curSaleMan.id);case 6:e=a.sent,s=e.object,t.list=s.list,t.beginDate=s.beginDate,t.endDate=s.endDate,t.exchangeKey=s.key;case 12:return a.prev=12,t.loading=!1,a.finish(12);case 15:case"end":return a.stop()}},a,t,[[3,,12,15]])}))()},back:function(){this.$router.back()},settle:function(){var t=this;return r()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.exchangeKey){a.next=3;break}return t.$message({message:"无可结算数据",type:"warning"}),a.abrupt("return");case 3:return t.loading=!0,a.prev=4,a.next=7,Object(o.b)(t.exchangeKey);case 7:a.sent,t.$message("交班结算成功"),t.$router.back();case 10:return a.prev=10,t.loading=!1,a.finish(10);case 13:case"end":return a.stop()}},a,t,[[4,,10,13]])}))()}}},_={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"store-settle"},[e("navbar",{on:{back:t.back}},[e("div",{staticClass:"title"},[t._v("交班结算")]),t._v(" "),e("div",{staticClass:"navbar-right",attrs:{slot:"right"},slot:"right"},[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("收银员:")]),t._v(" "+t._s(t.curSaleMan.name)+"\n            "),e("el-button",{staticClass:"ml-4",attrs:{type:"warning",round:"",size:"medium"},nativeOn:{click:function(a){a.preventDefault(),t.$router.push({path:"/settlerecord"})}}},[t._v("结算记录")])],1)]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"col-left"},[e("div",{staticClass:"item sale"},[e("div",{staticClass:"left"},[t._v("现金金额")]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.cashAmount)))])]),t._v(" "),e("div",{staticClass:"item sale"},[e("div",{staticClass:"left"},[t._v("POS金额")]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.posAmount)))])]),t._v(" "),e("div",{staticClass:"item sale"},[e("div",{staticClass:"left"},[t._v("会员卡金额")]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.cardAmount)))])]),t._v(" "),e("div",{staticClass:"item receivable"},[e("div",{staticClass:"left"},[t._v("应收")]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.receivableAmount)))])])]),t._v(" "),e("div",{staticClass:"col-right"},[e("div",{staticClass:"item retail"},[e("div",{staticClass:"left"},[t._v("零售")]),t._v(" "),e("div",{staticClass:"center"},[e("div",[e("span",{staticClass:"key"},[t._v("现金：")]),e("span",[t._v(t._s(t._f("RMB")(t.retailCash)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("POS机：")]),e("span",[t._v(t._s(t._f("RMB")(t.retailPos)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("会员卡：")]),e("span",[t._v(t._s(t._f("RMB")(t.retailCard)))])])]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.retailSum)))])]),t._v(" "),e("div",{staticClass:"item recharge"},[e("div",{staticClass:"left"},[t._v("充值金额")]),t._v(" "),e("div",{staticClass:"center"},[e("div",[e("span",{staticClass:"key"},[t._v("现金：")]),e("span",[t._v(t._s(t._f("RMB")(t.rechargeCash)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("POS机：")]),e("span",[t._v(t._s(t._f("RMB")(t.rechargePos)))])])]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.rechargeSum)))])]),t._v(" "),e("div",{staticClass:"item tequan"},[e("div",{staticClass:"left"},[t._v("特权销售")]),t._v(" "),e("div",{staticClass:"center"},[e("div",[e("span",{staticClass:"key"},[t._v("现金：")]),e("span",[t._v(t._s(t._f("RMB")(t.tequanCash)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("POS机：")]),e("span",[t._v(t._s(t._f("RMB")(t.tequanPos)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("会员卡：")]),e("span",[t._v(t._s(t._f("RMB")(t.tequanCard)))])])]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.tequanSum)))])]),t._v(" "),e("div",{staticClass:"item refund"},[e("div",{staticClass:"left"},[t._v("退款金额")]),t._v(" "),e("div",{staticClass:"center"},[e("div",[e("span",{staticClass:"key"},[t._v("现金：")]),e("span",[t._v(t._s(t._f("RMB")(t.refundCash)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("POS机：")]),e("span",[t._v(t._s(t._f("RMB")(t.refundPos)))])]),t._v(" "),e("div",[e("span",{staticClass:"key"},[t._v("会员卡：")]),e("span",[t._v(t._s(t._f("RMB")(t.refundCard)))])])]),t._v(" "),e("div",{staticClass:"right"},[t._v(t._s(t._f("RMB")(t.refundSum)))])])])]),t._v(" "),e("div",{staticClass:"footer"},[e("div",{staticClass:"between"},[t._v("\n                结算时间段："),e("span",[t._v(t._s(t._f("formatSecond")(t.beginDate)))]),t._v(" 至 "),e("span",[t._v(t._s(t._f("formatSecond")(t.endDate)))])]),t._v(" "),e("div",{staticClass:"commit"},[e("el-button",{attrs:{type:"primary",disabled:!t.exchangeKey},nativeOn:{click:function(a){return a.preventDefault(),t.settle(a)}}},[t._v("结 算")])],1)])],1)},staticRenderFns:[]};var f=e("VU/8")(d,_,!1,function(t){e("Y4aQ")},"data-v-672f0594",null);a.default=f.exports}});