webpackJsonp([7],{NHHS:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=s("Dd8w"),i=s.n(l),a=s("NYxO"),n=s("VvTn"),c={name:"prebills",data:function(){return{tableHeight:window.innerHeight-60-60-120,sideHeight:window.innerHeight-100+"px",selectBill:{}}},computed:i()({},Object(a.b)(["preBills"]),{selectMember:function(){return this.selectBill&&this.selectBill.member?this.selectBill.member:{}},sumAmount:function(){var e=0;return this.selectBill.cartGoods&&this.selectBill.cartGoods.forEach(function(t){e=Object(n.a)(Object(n.b)(t.price,t.count),e)}),e},count:function(){var e=0;return this.selectBill.cartGoods&&this.selectBill.cartGoods.forEach(function(t){e+=t.count}),e}}),activated:function(){this.selectBill=this.preBills[0]||{}},methods:{select:function(e){this.selectBill=e},mul:function(e,t){return Object(n.b)(e,t)},back:function(){this.$router.back()},remove:function(){var e=this;this.selectBill.cartGoods?this.$confirm("确定作废吗?","提示",{confirmButtonText:"确定(Enter)",cancelButtonText:"取消(Esc)",type:"warning"}).then(function(){e.$store.dispatch("remove",e.selectBill).then(function(){e.selectBill={}})}):this.$message({message:"请先从列表选择挂单记录",type:"warning"})},repay:function(){this.selectBill.cartGoods?(this.$store.dispatch("repay",this.selectBill),this.$store.dispatch("setMember",this.selectMember),this.$router.back()):this.$message({message:"请先从列表选择挂单记录",type:"warning"})}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"prebills"},[s("navbar",{on:{back:e.back}},[e._v("取单")]),e._v(" "),s("el-container",[s("el-aside",{staticClass:"container-left"},[s("div",{staticClass:"header"},[e._v("列表")]),e._v(" "),s("el-scrollbar",{ref:"prebills-table",style:{height:e.sideHeight},attrs:{"wrap-class":"scrollbar-prebills-table"}},e._l(e.preBills,function(t,l){return s("div",{key:l,staticClass:"prebill",class:{select:t===e.selectBill},on:{click:function(s){e.select(t)}}},[s("div",{staticClass:"no"},[e._v("牌号："+e._s(t.no))]),e._v(" "),s("div",{staticClass:"credate"},[e._v(e._s(e._f("format")(t.creDate,"MM-dd HH:mm:ss")))])])}))],1),e._v(" "),s("el-main",{staticClass:"container-center"},[s("div",{staticClass:"info"},[s("div",{staticClass:"member"},[s("span",[s("svg-icon",{attrs:{"icon-class":"vip"}}),e._v("会员：")],1),e._v(" "),s("el-dropdown",{attrs:{trigger:"click"}},[s("span",{staticClass:"el-dropdown-link"},[e._v("\n                            "+e._s(e.selectMember.name||"非会员")),s("i",{directives:[{name:"show",rawName:"v-show",value:e.selectMember.name,expression:"selectMember.name"}],staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[e._v("卡号："+e._s(e.selectMember.code))]),e._v(" "),s("el-dropdown-item",[e._v("电话："+e._s(e.selectMember.phone))])],1)],1)],1),e._v(" "),s("div",[s("span",[s("svg-icon",{attrs:{"icon-class":"form"}}),e._v("备注：")],1),e._v(e._s(e.selectBill.remark)+"\n                ")])]),e._v(" "),s("el-table",{staticClass:"goods-table",attrs:{data:e.selectBill.cartGoods,stripe:"",border:"",height:e.tableHeight}},[s("el-table-column",{attrs:{prop:"name",label:"商品"}}),e._v(" "),s("el-table-column",{attrs:{prop:"price",label:"单价"}}),e._v(" "),s("el-table-column",{attrs:{prop:"count",label:"数量"}}),e._v(" "),s("el-table-column",{attrs:{label:"小计"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e._f("RMB")(e.mul(t.row.price,t.row.count)))+"\n                    ")]}}])})],1),e._v(" "),s("div",{staticClass:"footer"},[s("div",{staticClass:"summary"},[s("div",[e._v("共 "+e._s(e.count)+" 件")]),s("div",[e._v("总额："),s("span",[e._v(e._s(e._f("RMB")(e.sumAmount)))])])]),e._v(" "),s("div",{staticClass:"options"},[s("el-button",{staticClass:"px-5",attrs:{type:"danger"},on:{click:e.remove}},[e._v("作 废")]),e._v(" "),s("el-button",{staticClass:"px-5",attrs:{type:"primary"},on:{click:e.repay}},[e._v("收 银")])],1)])],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(c,r,!1,function(e){s("TMiN"),s("l3eb")},"data-v-99ac4540",null);t.default=o.exports},TMiN:function(e,t){},l3eb:function(e,t){}});